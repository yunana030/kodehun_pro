<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout/layout.html}">
<head>
    <meta charset="UTF-8">
    <title>ììœ ê²Œì‹œíŒ</title>
</head>

<div layout:fragment="content">
    <section id="about">
        <!-- ê²€ìƒ‰ í¼ -->
        <form action="/free/list" method="get">
            <input type="hidden" name="size" th:value="${pageRequestDTO.size}">
            <div class="search-area">
                <div class="yuna-search-wrapper">
                    <select class="yuna-search-type" name="type">
                        <option value="">----</option>
                        <option value="t" th:selected="${pageRequestDTO.type=='t'}">ì œëª©</option>
                        <option value="c" th:selected="${pageRequestDTO.type=='c'}">ë‚´ìš©</option>
                        <option value="w" th:selected="${pageRequestDTO.type=='w'}">ì‘ì„±ì</option>
                        <option value="tc" th:selected="${pageRequestDTO.type=='tc'}">ì œëª©+ë‚´ìš©</option>
                        <option value="tcw" th:selected="${pageRequestDTO.type=='tcw'}">ì œëª©+ë‚´ìš©+ì‘ì„±ì</option>
                    </select>
                </div>
                    <input type="text" name="keyword" class="yuna-search-input"
                           th:value="${pageRequestDTO.keyword}" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    <button class="yuna-search-btn" type="submit">ê²€ìƒ‰</button>
                    <a class="yuna-search-btn" th:href="@{/free/list}">ì´ˆê¸°í™”</a>
            </div>
        </form>

        <!-- ê³µì§€ì‚¬í•­ -->
        <h4>ğŸ“¢ ê³µì§€ì‚¬í•­</h4>
        <table class="table">
            <thead>
            <tr>
                <th>ì œëª©</th>
                <th>ì‘ì„±ì¼</th>
            </tr>
            </thead>
            <tbody>
            <tr class="table-danger" th:each="notice : ${noticeList}">
                <td><a th:href="@{/free/notice/read(id=${notice.id})}" th:text="${notice.title}"></a></td>
                <td th:text="${#temporals.format(notice.regDate, 'yyyy-MM-dd HH:mm')}"></td>
            </tr>
            <tr th:if="${#lists.isEmpty(noticeList)}">
                <td colspan="2" class="text-center text-muted py-3">ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
            </tr>
            </tbody>
        </table>

        <!-- ììœ ê²Œì‹œíŒ -->
        <h4>ğŸ’¬ ììœ ê²Œì‹œíŒ</h4>
        <table class="table">
            <thead>
            <tr>
                <th>ë²ˆí˜¸</th>
                <th>ì œëª©</th>
                <th>ì‘ì„±ì</th>
                <th>ë“±ë¡ì¼</th>
                <th>ì¡°íšŒìˆ˜</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="free:${responseDTO.dtoList}">
                <td th:text="${free.id}"></td>
                <td>
                    <a th:href="|@{/free/read(id=${free.id},mode=1)}&${pageRequestDTO.getLink()}|"
                       th:text="${free.title}"></a>
                </td>
                <td th:text="${free.writer}"></td>
                <td th:text="${#temporals.format(free.regDate,'yyyy-MM-dd HH:mm')}"></td>
                <td th:text="${free.readCount}"></td>
            </tr>
            </tbody>
        </table>

        <!-- í˜ì´ì§€ -->
        <div class="text-center mb-3">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:if="${responseDTO.prev}">
                    <a class="page-link"
                       th:href="|@{/free/list(page=${responseDTO.start-1})}&${pageRequestDTO.getLink()}|">Previous</a>
                </li>

                <th:block th:each="i:${#numbers.sequence(responseDTO.start, responseDTO.end)}">
                    <li th:class="${responseDTO.page==i} ? 'page-item active' : 'page-item'">
                        <a class="page-link"
                           th:href="|@{/free/list(page=${i})}&${pageRequestDTO.getLink()}|"
                           th:text="${i}"></a>
                    </li>
                </th:block>

                <li class="page-item" th:if="${responseDTO.next}">
                    <a class="page-link"
                       th:href="|@{/free/list(page=${responseDTO.end+1})}&${pageRequestDTO.getLink()}|">Next</a>
                </li>
            </ul>
        </div>

        <!-- ê¸€ ë“±ë¡ ë²„íŠ¼ -->
        <div class="text-end">
            <a th:href="@{/free/register}" class="reallywant">ê¸€ ë“±ë¡</a>
        </div>
    </section>
    <style>
        /* ì „ì²´ ì„¹ì…˜ */
        section#about {
            display: flex;
            flex-direction: column;
            justify-content: center; /* ì»¨í…ì¸ ê°€ ì ìœ¼ë©´ ì¤‘ì•™ ì •ë ¬ */
            min-height: 77vh;        /* í™”ë©´ë³´ë‹¤ ì‘ìœ¼ë©´ ì¤‘ì•™ ì •ë ¬ */
            padding: 3rem 1rem 2rem;
            width: 90%;
            max-width: 1100px;
            margin: 0 auto;
        }

        /* ê²€ìƒ‰ í¼, í…Œì´ë¸” ë“± ì»¨í…ì¸  ì˜ì—­ì´ ë§ì•„ì§€ë©´ ìì—°ìŠ¤ëŸ½ê²Œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ ë°œìƒ */
        .search-area, .table, .text-end {
            width: 100%;
        }

        /* ì œëª© ìŠ¤íƒ€ì¼ */
        h4 {
            font-weight: 600;
            color: #333;
            margin-top: 10px;
            margin-bottom: 0;
        }

        .search-area {
            display: flex;
            justify-content: center;
            margin-top: 1.5rem;
            gap: 0.5rem;
        }

        /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .table {
            border-radius: 25%;
            width: 100%;
            margin-top: 1rem;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .table thead {
            background-color: #f8f9fa;
        }

        .table th, .table td {
            padding: 12px 16px;
            border-bottom: 1px solid #e9ecef;
            text-align: left;
        }

        .table tbody tr:hover {
            background-color: #f1f3f5;
            transition: background-color 0.2s ease;
        }

        .table a {
            text-decoration: none;
            color: #212529;
            transition: color 0.2s;
        }

        .table a:hover {
            color: #0d6efd;
        }

        /* ê³µì§€ì‚¬í•­ ê°•ì¡° */
        tr.table-danger {
            background-color: #fff5f5 !important;
        }

        tr.table-danger a {
            font-weight: 600;
            color: #b02a37;
        }

        tr.table-danger:hover {
            background-color: #ffe3e3 !important;
        }
    </style>

</div>
</html>
