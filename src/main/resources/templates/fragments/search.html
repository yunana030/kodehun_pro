<!-- templates/fragments/search.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8"></head>
<body>
<div th:fragment="smartSearchFragment">
    <div class="hero-iconbar" id="smartSearch">
        <!-- 카테고리 -->
        <div class="dropwrap">
            <button id="btnCategory" type="button" class="icon-btn" title="카테고리">
                🏷
            </button>
            <!-- 카테고리: 시도/구군 리스트 출력 (메가 드롭다운) -->
            <div id="menuCategory" class="dropdown-menu mega p-3">
                <div class="d-flex align-items-center justify-content-between mb-2">
                    <strong>카테고리 · 시도 · 구군</strong>
                    <button type="button" class="btn btn-sm btn-outline-secondary" id="catReset">초기화</button>
                </div>

                <div class="row g-3">
                    <!-- 카테고리 -->
                    <div class="col-12 col-md-3">
                        <label class="form-label mb-1">카테고리</label>
                        <select id="catCategory" class="form-select form-select-sm">
                            <option value="">전체</option>
                            <option value="spot">관광지</option>
                            <option value="cafe">카페</option>
                            <option value="restaurant">식당</option>
                            <option value="accommodation">숙소</option>
                        </select>
                    </div>

                    <!-- 시도 -->
                    <div class="col-12 col-md-3">
                        <label class="form-label mb-1">시도</label>
                        <ul id="catSidoList" class="list-group small scroll-y"></ul>
                    </div>

                    <!-- 구군 -->
                    <div class="col-12 col-md-6">
                        <label class="form-label mb-1">구군</label>
                        <div id="catGugunWrap" class="scroll-y border rounded p-2 small">
                            <div class="text-muted">시도를 먼저 선택하세요.</div>
                        </div>
                    </div>
                </div>

                <div class="mt-3 d-flex gap-2">
                    <button id="catApply" class="btn btn-primary btn-sm" type="button">적용</button>
                    <button class="btn btn-outline-secondary btn-sm closeMenus" type="button">닫기</button>
                </div>
            </div>
        </div>

        <!-- 지역검색 -->
        <div class="dropwrap">
            <button id="btnRegion" type="button" class="icon-btn" title="지역검색">🗺</button>
            <div id="menuRegion" class="dropdown-menu p-3" style="min-width:280px">
                <div class="mb-2">
                    <label class="form-label mb-1">카테고리</label>
                    <select id="selCategory" class="form-select form-select-sm">
                        <option value="">전체</option>
                        <option value="spot">관광지</option>
                        <option value="cafe">카페</option>
                        <option value="restaurant">식당</option>
                        <option value="accommodation">숙소</option>
                    </select>
                </div>
                <div class="row g-2">
                    <div class="col-6">
                        <label class="form-label mb-1">시도</label>
                        <select id="selSido" class="form-select form-select-sm">
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="col-6">
                        <label class="form-label mb-1">구군</label>
                        <select id="selGugun" class="form-select form-select-sm" disabled>
                            <option value="">선택</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <label class="form-label mb-1">장소명(선택)</label>
                        <input id="regionPlace" type="text" class="form-control form-control-sm" placeholder="예) 해운대, 남산…">
                    </div>
                </div>
                <div class="mt-3 d-flex gap-2">
                    <button id="regionGo" class="btn btn-primary btn-sm w-100" type="button">검색</button>
                    <button class="btn btn-outline-secondary btn-sm closeMenus" type="button">닫기</button>
                </div>
            </div>
        </div>

        <!-- 장소검색 -->
        <div class="dropwrap">
            <button id="btnPlace" type="button" class="icon-btn" title="장소검색">🔎</button>
            <div id="menuPlace" class="dropdown-menu p-3" style="min-width:280px">
                <div class="input-group input-group-sm">
                    <input id="placeInput" type="text" class="form-control" placeholder="장소명을 입력하세요.">
                    <button id="placeGo" class="btn btn-outline-primary" type="button">검색</button>
                </div>
                <div class="form-text mt-1">Enter 키로도 검색됩니다.</div>
                <div class="mt-3 d-flex justify-content-end">
                    <button class="btn btn-outline-secondary btn-sm closeMenus" type="button">닫기</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
